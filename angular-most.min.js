!function(window,angular,$){function TextUtils(){}function Args(){}function UrlPropertyDescriptor(obj){return{get:function(){return"undefined"!=typeof obj&&null!=obj?"function"==typeof obj.url?obj.url():obj.url||obj.$url:void 0}}}function ModelPropertyDescriptor(obj){return{get:function(){return"undefined"!=typeof obj&&null!=obj?"function"==typeof obj.model?obj.model():obj.model||obj.$model:void 0}}}function dateParser(key,value){return"string"==typeof value&&REG_DATETIME_ISO.test(value)?new Date(value):value}function ClientDataService($http,$q){var self=this;this.$http=$http,this.$q=$q,this.base="/",self.getBase=function(){return angular.isNotEmptyString(self.base)?/\/$/.test(self.base)?self.base:self.base.concat("/"):"/"},self.resolveUrl=function(s){if(angular.isNotEmptyString(s))return/^\//.test(s)?self.getBase()+s.substr(1):self.getBase()+s;throw new Error("Invalid argument. Expected not empty string.")}}function ClientDataModel(name,service){this.getName=function(){return name},this.getService=function(){return service};var url_=angular.format("/%s/index.json",this.getName());this.getUrl=function(){return url_},this.setUrl=function(value){return url_=/^\//.test(value)?value:"/"+this.getName()+"/"+value,this}}function ClientDataContext(service){this.model=function(name){return new ClientDataModel(name,service)},this.getService=function(){return service},this.setService=function(value){service=value}}function MostDataField(name){if("string"!=typeof name)throw new Error("Invalid argument type. Expected string.");this.name=name}function FieldSelector(name){this.name=name}function FieldExpression(expr){this.expr=expr}function ClientDataQueryable(model,service){this.$model=model,this.privates_={};var svc;svc=service,Object.defineProperty(this,"service",{get:function(){return svc},set:function(value){svc=value},configurable:!1,enumerable:!1});var __items,__item,self=this;self.privates_=function(){},Object.defineProperty(self,"items",{get:function(){if("undefined"==typeof __items){var deferred=self.service.$q.defer();__items=deferred.promise;var copy=self.getParams();delete copy.privates_,self.service.items(copy,function(err,result){err?(console.log(err),__items=null,deferred.reject(err)):(__items=result,deferred.resolve(result))})}return __items},set:function(value){__items=value}}),Object.defineProperty(self,"item",{get:function(){if("undefined"==typeof __item){var deferred=self.service.$q.defer();__item=deferred.promise;var copy=self.first().getParams();delete copy.privates_,self.service.items(copy,function(err,result){err?(console.log(err),__item=null,deferred.reject(err)):(__item=result[0],deferred.resolve(result[0]))})}return __item},set:function(value){__item=value}}),Object.defineProperty(self,"schema",{get:function(){return"undefined"==typeof self.privates_.schema&&(self.privates_.schema=self.service.schema(self.$model,function(err,result){self.privates_.schema=result})),self.privates_.schema},set:function(value){self.privates_.schema=value}}),self.$url=angular.format("/%s/index.json",self.$model),this.getUrl=function(){return self.$url},this.setUrl=function(value){return/^\//.test(value)?self.$url=value:self.$url="/"+self.$model+"/"+value,this}}function QueryableController($scope,$svc){$scope.query=new ClientDataQueryable,$scope.query.service=$svc}function CommonController($scope,$q,$location,$window,$shared){var $route,$context,$routeParams,$stateParams,$rootElement=angular.element(document.querySelector(".ng-scope")),$injector=$rootElement.injector();if($injector&&($injector.has("$q")&&($q=$q||$injector.get("$q")),$injector.has("$location")&&($location=$location||$injector.get("$location")),$injector.has("$window")&&($window=$window||$injector.get("$window")),$injector.has("$routeParams")&&($routeParams=$injector.get("$routeParams")),$injector.has("$stateParams")&&($stateParams=$injector.get("$stateParams")),$injector.has("$route")&&($route=$injector.get("$route")),$injector.has("$shared")&&($shared=$shared||$injector.get("$shared")),$injector.has("$context")&&($context=$injector.get("$context"))),$scope.getContext=function(){return Args.notNull($context,"MOST Data Context Service"),$context},$scope.broadcast=function(name,args){"undefined"!=typeof $shared&&$shared.broadcast(name,args)},$scope.client={route:$routeParams||$stateParams||{}},$scope.client.route.current={},$route&&angular.isDefined($route.current)){var $$route=$route.current.$$route;"undefined"!=typeof $$route&&null!==$$route&&($scope.client.route.current=$$route)}$scope.server={route:$window.route||{}},$scope.today=function(){var res=new Date;return new Date(res.getFullYear(),res.getMonth(),res.getDate())},$scope.random={color:function(){return angular.randomColor()}},$scope.reload=function(path){"undefined"==typeof path?$window.location.reload():$location.path(path)},$scope.now=function(){return new Date},$scope.redirect=function(path){$window.location.href=path},$scope.location=$location,$scope.location.encodedUrl=function(){return encodeURIComponent("#"+$location.url())},$scope.location.encodedAbsUrl=function(){return encodeURIComponent($location.absUrl())},$scope.back=function(err){if(err);else{var returnURL=$scope.returnUrl||$scope["return"];if(returnURL)$window.location.href=returnURL;else if("undefined"!=typeof $scope.client.route.r){var url=$window.location.search?$window.location.pathname.concat("?",$window.location.search):$window.location.pathname;$window.location.href="/"==$scope.client.route.r?url:$scope.client.route.r}else $scope.$root.referrer&&($window.location.href="#".concat($scope.$root.referrer))}}}function DataController($scope,$q,$location,$svc,$window,$shared){var $rootElement=angular.element(document.querySelector(".ng-scope")),$injector=$rootElement.injector();$injector&&($injector.has("$q")&&($q=$q||$injector.get("$q")),$injector.has("$location")&&($location=$location||$injector.get("$location")),$injector.has("$window")&&($window=$window||$injector.get("$window")),$injector.has("$shared")&&($shared=$shared||$injector.get("$shared")),$injector.has("$svc")&&($svc=$svc||$injector.get("$svc"))),CommonController($scope),QueryableController($scope,$svc),$scope.route=$window.route,$scope.reloadData=function(){angular.isDefined($scope.query.$model)&&($scope.query.items=null,$svc.items($scope.query,function(err,result){err?$scope.query.items=null:$scope.query.items=result}))},$shared&&($scope.$on("item.new",function(event,args){args=args||{},args.model==$scope.model&&$scope.reloadData()}),$scope.$on("item.delete",function(event,args){args=args||{},args.model==$scope.model&&$scope.reloadData()}),$scope.$on("item.save",function(event,args){args=args||{},args.model==$scope.model&&$scope.reloadData()})),$scope.save=function(){$svc.save($scope.item,{model:$scope.model},function(err,result){if(err)$scope.submitted=!1,$scope.messages=angular.localized(err.message);else{$scope.showNew=!1,$scope.submitted=!0;var returnURL=$scope.returnUrl||$scope["return"];returnURL?$window.location.href=returnURL:$window.location.href=angular.format("/%s/%s/show.html",$scope.model,result.id)}})},$scope.saveItems=function(){$svc.save($scope.query.items,{model:$scope.model},function(err,result){if(err)$scope.submitted=!1,$scope.messages=angular.localized(err.message);else{$scope.submitted=!0;var returnURL=$scope.returnUrl||$scope["return"];returnURL?$window.location.href=returnURL:$window.location.href=angular.format("/%s/%s/show.html",$scope.model,result.id)}})},$scope.remove=function(item,callback){callback=callback||function(){},$svc.remove(item,{model:$scope.model},function(err,result){if(err)$scope.submitted=!1,$scope.messages=angular.localized(err.message),callback(err);else{$scope.submitted=!0,callback(null,result),$shared&&$shared.broadcast("item.delete",{model:$scope.model,data:item});var returnURL=$scope.returnUrl||$scope["return"];returnURL&&($window.location.href=returnURL)}})}}function MostSharedService($rootScope,$location,$injector){this.$root=$rootScope,this.$root.referrer="/";var $routeParams,self=this;$injector&&$injector.has("$routeParams")&&($routeParams=$injector.get("$routeParams")),self.$root.paths=self.$root.paths||[],self.$root.$on("$routeChangeSuccess",function(event,current,previous){var $$route=current.$$route;if("undefined"==typeof $$route)return self.$root.paths=[],void self.$root.$broadcast("$routeScopePathsChange",self.$root.paths);if($$route.title)self.$root.title=angular.localized($$route.title);else if($routeParams){var action=$routeParams.action,controller=$routeParams.controller,title=[];angular.isDefined(controller)&&title.push(angular.localized(controller)),angular.isDefined(action)&&title.push(angular.localized(action)),title.length>0&&(self.$root.title=title.join(" - "))}var locationPath=$location.url();self.$root.paths.filter(function(x){return x.active}).forEach(function(x){x.active=!1});var ix=self.$root.paths.findIndex(function(x){return x.href==locationPath});ix>=0?(self.$root.paths.splice(ix+1),self.$root.paths[ix].active=!0):self.$root.paths.push({title:self.$root.title,href:locationPath,active:!0}),self.$root.paths.length>1&&(self.$root.referrer=self.$root.paths[self.$root.paths.length-2].href),self.$root.$broadcast("$routeScopePathsChange",self.$root.paths)})}function ItemController($scope,$q,$location,$svc,$window,$shared){var $routeParams,$rootElement=angular.element(document.querySelector(".ng-scope")),$injector=$rootElement.injector();$injector&&($injector.has("$q")&&($q=$q||$injector.get("$q")),$injector.has("$location")&&($location=$location||$injector.get("$location")),$injector.has("$svc")&&($svc=$svc||$injector.get("$svc")),$injector.has("$window")&&($window=$window||$injector.get("$window")),$injector.has("$shared")&&($shared=$shared||$injector.get("$shared")),$injector.has("$routeParams")&&($routeParams=$injector.get("$routeParams"))),CommonController($scope),$scope.broadcast=function(name,args){"undefined"!=typeof $shared&&$shared.broadcast(name,args)},$scope.$watch("item",function(value){angular.isDefined($scope.state)&&angular.isDefined($scope.model)&&"new"==$scope.state&&($scope.item=$scope.item||{},$svc.schema($scope.model,function(err,result){if(!err){var schema=result,params={};for(var key in $scope.client.route)params[key]=$scope.client.route[key];for(var key in $scope.server.route)$scope.server.route.hasOwnProperty(key)&&0==params.hasOwnProperty(key)&&(params[key]=$scope.server.route[key]);var resolveAssociatedObject=function(attr,associatedValue){var mapping=attr.mapping,q=new ClientDataQueryable(mapping.parentModel);q.service=$svc;var deferred=$q.defer();$scope.item[mapping.childField]=deferred.promise,q.where(mapping.parentField).equal(associatedValue).item.then(function(result){$scope.item[attr.property||attr.name]=result,deferred.resolve(result)},function(reason){$scope.item[attr.property||attr.name]=null,deferred.resolve(null),console.log("Failed to get associated object with reason:"+reason)})},resolveJunctionObject=function(attr,value){var mapping=attr.mapping,q=new ClientDataQueryable(mapping.childModel);q.service=$svc;var deferred=$q.defer();$scope.item[attr.property||attr.name]=deferred.promise,q.where(mapping.childField).equal(value).item.then(function(result){$scope.item[attr.property||attr.name]=[result],deferred.resolve([result])},function(reason){$scope.item[attr.property||attr.name]=null,deferred.resolve(null),console.log("Failed to get junction object with reason:"+reason)})};for(var key in params)if(params.hasOwnProperty(key)){var attr=schema.attributes.filter(function(x){return x.name==key||x.property==key})[0];if(attr&&!attr.primary){var value=params[key];angular.isDefined($scope.item[key])||(attr.mapping?"object"==typeof value?$scope.item[key]=value:"association"===attr.mapping.associationType&&attr.mapping.childModel===$scope.model?resolveAssociatedObject(attr,value):"junction"===attr.mapping.associationType&&"string"==typeof value&&value.length>0&&resolveJunctionObject(attr,value):$scope.item[key]=value)}}}}))}),$scope.redirection=!0,$scope.route=$window.route,$scope.$watch("id",function(newValue,oldValue){if("new"!=$scope.state){if(!angular.isDefined(newValue))return void($scope.item=null);if(newValue!==oldValue||null==$scope.item){var q=new ClientDataQueryable;q.service=$svc;var item=q.model($scope.model).where("id").equal($scope.id).expand($scope.expand).first().item;item.then(function(result){$scope.item=result},function(reason){console.log(reason),$scope.item=null})}}}),$scope.cancel=function(){var returnURL=$scope.returnUrl||$scope["return"];if(returnURL)$window.location.href=returnURL;else if("undefined"!=typeof $scope.client.route.r){var url=$window.location.search?$window.location.pathname.concat("?",$window.location.search):$window.location.pathname;$window.location.href="/"==$scope.client.route.r?url:$scope.client.route.r}else $scope.$root.referrer&&($window.location.href="#".concat($scope.$root.referrer))},$scope.show=function(){var key="id";$scope.item&&$scope.item[key]&&($window.location.href=angular.format("/%s/%s/show.html",$scope.model,$scope.item[key]))},$scope.removeWithConfirmation=function(message,callback){message=message||"You are going to delete this item. Do you want to proceed?",confirm(message)&&$scope.remove(callback)},$scope.remove=function(callback){callback=callback||function(){};var item=$scope.item;$svc.remove(item,{model:$scope.model},function(err,result){if(err)$scope.submitted=!1,$scope.messages=angular.localized(err.message),callback(err);else{if($scope.submitted=!0,callback(null,result),$shared&&$shared.broadcast("item.delete",{model:$scope.model,data:item}),0==$scope.redirection)return;var returnURL=$scope.returnUrl||$scope["return"];"string"==typeof returnURL&&($window.location.href=returnURL)}})},$scope.save=function(callback){$svc.save($scope.item,{model:$scope.model},function(err,result){if(err){if($scope.submitted=!1,$scope.messages=angular.localized(err.message),"function"==typeof callback)return callback(err);$shared&&($scope.state=$scope.state||"save",$shared.broadcast("item.error",{model:$scope.model,data:$scope.item,error:err}))}else{if($scope.showNew=!1,$scope.submitted=!0,$scope.item=result,"function"==typeof callback)return callback(null,result);if($shared&&($scope.state=$scope.state||"save",$shared.broadcast("item.".concat($scope.state),{model:$scope.model,data:result})),0==$scope.redirection)return;var returnURL=$scope.returnUrl||$scope["return"];if(returnURL)$window.location.href=returnURL;else if("undefined"!=typeof $scope.client.route.r){var url=$window.location.search?$window.location.pathname.concat("?",$window.location.search):$window.location.pathname;$window.location.href="/"==$scope.client.route.r?url:$scope.client.route.r}else if($scope.$root.referrer)if($scope.$root.referrer!=$location.path()||1==$scope.$root.paths.length){var iy=$scope.$root.referrer.indexOf("?");0>iy?$location.path($scope.$root.referrer):$location.path($scope.$root.referrer.substr(0,iy)).search($scope.$root.referrer.substr(iy+1))}else{var ix=$scope.$root.paths.findIndex(function(x){return x.href==$location.path()});if(ix>0&&ix>=$scope.$root.paths.length-1){var prevUrl=$scope.$root.paths[ix-1].href;$scope.$root.paths.splice(ix),$window.location.href="#".concat(prevUrl)}else $window.location.href="#".concat($scope.$root.referrer)}else $window.location.href=angular.format("/%s/%s/index.html",$scope.model,result.id)}})},$scope.$back=function(){window.history.back()}}function MostLocalizedDirective(){return{restrict:"A",link:function(scope,element,attrs){attrs.title&&element.attr("title",angular.localized(attrs.title,attrs.mostLoc)),attrs.placeholder&&element.attr("placeholder",angular.localized(attrs.placeholder,attrs.mostLoc))}}}function MostLocalizedHtmlDirective(){return{restrict:"A",scope:!1,link:function(scope,element,attrs){var text=angular.localized(element.html(),attrs.mostLocHtml);text&&element.html(text)}}}function MostLocalizedFilter(){return function(input,localeSet){return angular.localized(input,localeSet)}}function MostItemDirective($q,$parse){return{restrict:"A",scope:!1,link:function(scope,element,attrs){scope.route=window.route;var item=scope.$eval(attrs.mostItem);item.then(function(result){scope.item=result},function(reason){console.log(reason),scope.item=null})}}}function MostVariableDirective($timeout){return{restrict:"E",link:function(scope,element,attrs){function set_(value){"$digest"===scope.$$phase||"$apply"===scope.$$phase?$timeout(function(){scope[attrs.name]=value}):scope[attrs.name]=value}return attrs.ngValue?scope.$eval(attrs.name+"="+attrs.ngValue+";"):void scope.$watch(attrs.value,function(newValue){set_(newValue)})}}}function MostParamDirective($window){return{restrict:"AE",link:function(scope,element,attrs){if(scope.route=$window.route,attrs.mostParam){for(var values=attrs.mostParam.split(";"),params={},i=0;i<values.length;i++){var value=values[i].split("=");2==value.length&&(params[value[0]]=value[1])}$window.route=$window.route||{};for(var name in params)params.hasOwnProperty(name)&&scope.$watch(params[name],function(newValue){$window.route[name]=newValue})}else scope.$watch(attrs.value,function(newValue){$window.route=$window.route||{},$window.route[attrs.name]=newValue})}}}function MostEmailDirective($compile){return{restrict:"E",templateUrl:"/templates/directives/email.html",replace:!0,compile:function(tElement,tAttrs){return function(scope,iElement,iAttrs){var $element=$(iElement);$element.find("label").html(iAttrs.title);var attributes=$element.prop("attributes"),$input=$element.find("input");$.each(attributes,function(){"class"!==this.name&&$input.attr(this.name,this.value)}),$compile($element)(scope)}}}}function MostStringDirective($compile){return{restrict:"E",templateUrl:"/templates/directives/string.html",replace:!0,compile:function(tElement,tAttrs){return function(scope,iElement,iAttrs){var $element=$(iElement);$element.find("label").html(iAttrs.title);var attributes=$element.prop("attributes"),$input=$element.find("input");$.each(attributes,function(){"class"!==this.name&&$input.attr(this.name,this.value)}),$compile($element)(scope)}}}}function MostTypeaheadDirective($compile,$svc){return{restrict:"E",template:'<div><label loc-html></label><input autocomplete="off"  typeahead-editable="false" type="text" class="form-control"/></div>',replace:!0,compile:function(){return function(scope,iElement,iAttrs){var $element=$(iElement);"undefined"!=typeof iAttrs.title?$element.find("label").html(iAttrs.title):$element.find("label").remove();var dataName=iAttrs.name.concat("Data"),dataModel=iAttrs.model,attributes=$element.prop("attributes"),$input=$element.find("input");$.each(attributes,function(){"placeholder"===this.name?$input.attr(this.name,angular.localized(this.value)):"class"!==this.name&&$input.attr(this.name,this.value)});var field=iAttrs.field,dataFilter=null,value=iAttrs.value||"x",typeaheadAttr=angular.format("%s as x.%s for x in %s($viewValue)",value,field,dataName),limit=parseInt(iAttrs.limit)||10;if($input.attr("uib-typeahead",typeaheadAttr),iAttrs.onselect&&$input.attr("typeahead-on-select",iAttrs.onselect),iAttrs.search){for(var search=iAttrs.search.split(","),i=0;i<search.length;i++){var str=search[i];search[i]=angular.format("indexof(%s,'%s') gt 0",str)}dataFilter=search.join(" or ")}else dataFilter=angular.format("indexof(%s,'%s') gt 0",field);iAttrs.filter&&(dataFilter=angular.format("%s and (%s))",iAttrs.filter,dataFilter)),scope.route=window.route,scope[dataName]=function(filter){for(var q=new ClientDataQueryable(dataModel),s=dataFilter;s.indexOf("%s")>=0;)s=angular.format(s,filter);return q.filter(s).take(limit),$svc.get(q)},$compile($element)(scope)}}}}function MostDataInstanceDirective($svc,$parse){return{restrict:"E",scope:{model:"@",filter:"@",select:"@",group:"@",order:"@",top:"@",inlinecount:"@",paged:"@",skip:"@",expand:"@",prepared:"@",url:"@"},link:function(scope,element,attrs){if("undefined"!=typeof scope.model){scope.route=window.route;var q=new ClientDataQueryable(scope.model),arr=[];if(q.service=$svc,angular.isNotEmptyString(scope.url)&&q.url(scope.url),scope.select&&(arr=scope.select.split(","),1==arr.length&&q.asArray(!0),q.select(arr)),scope.group&&(angular.isArray(scope.group)?q.group(scope.group):angular.isNotEmptyString(scope.group)&&q.group(scope.group.split(","))),scope.order){arr=[],angular.isArray(scope.order)?arr=scope.order:angular.isNotEmptyString(scope.order)&&(arr=scope.order.split(","));for(var i=0;i<arr.length;i++){var str=arr[i],matches=/(.*?) desc$/i.exec(str);matches?q.orderByDescending(matches[1]):(matches=/(.*?) asc$/i.exec(str),matches?q.orderBy(matches[1]):q.orderBy(str))}}parseInt(scope.skip)>0&&q.skip(parseInt(scope.skip)),parseInt(scope.top)>0&&q.take(parseInt(scope.top)),/^true$/i.test(scope.inlinecount)&&q.paged(!0),/^true$/i.test(scope.paged)&&q.paged(!0),angular.isNotEmptyString(scope.filter)&&(q.filter(scope.filter),"true"==scope.prepared&&q.prepare()),angular.isNotEmptyString(scope.expand)&&q.expand(scope.expand.split(",")),q.items.then(function(result){var setter,getter=$parse(attrs.name);getter&&(setter=getter.assign),"function"==typeof setter&&setter(scope.$parent,1==q.$top?result[0]:result)}),scope.$on("order.change",function(event,args){if("string"==typeof args)if(0==args.length)delete q.$orderby,q.reset().items.then(function(result){scope.$parent[attrs.name]=1==q.$top?result[0]:result});else{var orders=args.split(",");if(1==orders.length&&"undefined"!=typeof q.$orderby){var previousOrders=q.$orderby.split(",");if(1==previousOrders.length){var arr1=orders[0].split(" "),arr2=previousOrders[0].split(" ");"undefined"==typeof arr1[1]&&arr1[0]===arr2[0]&&("undefined"==typeof arr2[1]||"asc"===arr2[1]?(arr1.push("desc"),orders[0]=arr1.join(" ")):(arr1.push("asc"),orders[0]=arr1.join(" ")))}}q.reset().orderBy(orders.join(",")).items.then(function(result){scope.$parent[attrs.name]=1==q.$top?result[0]:result})}}),scope.$on("filter.change",function(event,args){"object"==typeof args?args.name==attrs.name&&"string"==typeof args.filter&&q.reset().filter(args.filter).items.then(function(result){scope.$parent[attrs.name]=1==q.$top?result[0]:result}):"string"==typeof args&&q.reset().filter(args).items.then(function(result){scope.$parent[attrs.name]=1==q.$top?result[0]:result})}),scope.$on("page.change",function(event,args){if("object"==typeof args&&args.name==attrs.name&&"undefined"!=typeof args.page){var page=parseInt(args.page),size=parseInt(scope.top);if(0>=size)return;q.reset().skip((page-1)*size).items.then(function(result){scope.$parent[attrs.name]=1==q.$top?result[0]:result})}});var dataReload=function(event,args){"object"==typeof args?args.name==attrs.name&&q.reset().items.then(function(result){scope.$parent[attrs.name]=1==q.$top?result[0]:result}):"string"==typeof args&&args===attrs.name&&q.reset().items.then(function(result){scope.$parent[attrs.name]=1==q.$top?result[0]:result})},dataRefresh=function(event,args){"object"==typeof args&&args.model==q.$model&&q.reset().items.then(function(result){scope.$parent[attrs.name]=1==q.$top?result[0]:result})};scope.$on("data.reload",dataReload),scope.$on("item.new",dataRefresh),scope.$on("item.save",dataRefresh),scope.$on("item.delete",dataRefresh)}}}}function MostFloatDirective(){return{priority:401,require:"ngModel",link:function(scope,elm,attrs,ctrl){ctrl.$parsers.unshift(function(viewValue){return"undefined"==typeof viewValue?(ctrl.$setValidity("float",!0),viewValue):0==viewValue.length?(ctrl.$setValidity("float",!0),viewValue):MostFloatDirective.FLOAT_REGEXP.test(viewValue)?(ctrl.$setValidity("float",!0),parseFloat(viewValue.replace(",","."))):void ctrl.$setValidity("float",!1)})}}}function MostRequiredDirective(){return{priority:400,require:"ngModel",link:function(scope,elm,attrs,ctrl){ctrl.$parsers.unshift(function(viewValue){return"undefined"==typeof viewValue||null==viewValue?void ctrl.$setValidity("required",!1):"string"==typeof viewValue&&0==viewValue.length?void ctrl.$setValidity("required",!1):(ctrl.$setValidity("required",!0),viewValue)})}}}function MostEventDirective($timeout){return{restrict:"E",link:function(scope,element,attrs){var name=element.attr("name")||attrs.event,action=attrs.eventAction;name&&scope.$on(name,function(event,args){action&&$timeout(function(){scope.$args=args;try{scope.$apply(action)}catch(e){console.log(e)}scope.$args=null})})}}}function MostWatchDirective(){return{restrict:"E",link:function(scope,element,attrs){var name=element.attr("name")||attrs.event,args=attrs.eventArgs;name&&("function"==typeof scope.broadcast?scope.$watch(args,function(value){scope.broadcast(name,value)}):scope.$watch(args,function(value){scope.emit(name,value)}))}}}function MostConfirmDirective(){return{restrict:"A",link:function(scope,element,attrs){element.bind("click",function(e){var answer=confirm(angular.localized(attrs.mostConfirm));answer?scope.$apply(attrs.mostConfirmAction):e.preventDefault()})}}}function IncludeReplaceDirective(){return{require:"ngInclude",restrict:"A",link:function(scope,element,attrs){element.replaceWith(element.children())}}}function ControllerInitDirective(){return{priority:1e3,compile:function(){return{pre:function(scope,element,attrs){attrs.ctrlInit&&scope.$eval(attrs.ctrlInit)}}}}}var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var n,r,i,s,o,u,a,t="",f=0;for(e=Base64._utf8_encode(e);f<e.length;)n=e.charCodeAt(f++),r=e.charCodeAt(f++),i=e.charCodeAt(f++),s=n>>2,o=(3&n)<<4|r>>4,u=(15&r)<<2|i>>6,a=63&i,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a);return t},decode:function(e){var n,r,i,s,o,u,a,t="",f=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");f<e.length;)s=this._keyStr.indexOf(e.charAt(f++)),o=this._keyStr.indexOf(e.charAt(f++)),u=this._keyStr.indexOf(e.charAt(f++)),a=this._keyStr.indexOf(e.charAt(f++)),n=s<<2|o>>4,r=(15&o)<<4|u>>2,i=(3&u)<<6|a,t+=String.fromCharCode(n),64!=u&&(t+=String.fromCharCode(r)),64!=a&&(t+=String.fromCharCode(i));return t=Base64._utf8_decode(t)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},_utf8_decode:function(e){for(var t="",n=0,r=c1=c2=0;n<e.length;)r=e.charCodeAt(n),128>r?(t+=String.fromCharCode(r),n++):r>191&&224>r?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return t}};"undefined"!=typeof module&&module&&module.exports;TextUtils.toBase64=function(s){return"string"==typeof s?Base64.encode(s):void 0},TextUtils.fromBase64=function(s){return"string"==typeof s?Base64.decode(s):void 0},TextUtils.isNotEmptyString=function(s){return"string"==typeof s?s.length>0:!1},TextUtils.format=function(f){var i;if("string"!=typeof f){var objects=[];for(i=0;i<arguments.length;i++)objects.push(arguments[i]);return objects.join(" ")}i=1;for(var args=arguments,len=args.length,str=String(f).replace(/%[sdj%]/g,function(x){if("%%"===x)return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":return JSON.stringify(args[i++]);default:return x}}),x=args[i];len>i;x=args[++i])str+=null===x||"object"!=typeof x?" "+x:" "+x.toString();return str},Args.check=function(expr,message){Args.notNull(expr,"Expression"),"function"==typeof expr&&expr.call();var res;if(res="function"==typeof expr?!expr.call():!expr){var err=new Error(message);throw err.code="ECHECK",err}},Args.notNull=function(arg,name){if("undefined"==typeof arg||null==arg){var err=new Error(name+" may not be null or undefined");throw err.code="ENULL",err}},Args.notString=function(arg,name){if("string"!=typeof arg){var err=new Error(name+" must be a string");throw err.code="EARG",err}},Args.notFunction=function(arg,name){if("function"!=typeof arg){var err=new Error(name+" must be a function");throw err.code="EARG",err}},Args.notNumber=function(arg,name){if("string"!=typeof arg){var err=new Error(name+" must be number");throw err.code="EARG",err}},Args.notEmpty=function(arg,name){if(Args.notNull(arg,name),Args.notString(arg,name),0==arg.length){var err=new Error(name+" may not be empty");return err.code="EEMPTY",err}},Args.notNegative=function(arg,name){if(Args.notNumber(arg,name),0>arg){var err=new Error(name+" may not be negative");return err.code="ENEG",err}},Args.positive=function(arg,name){if(Args.notNumber(arg,name),0>=arg){var err=new Error(name+" may not be negative or zero");return err.code="EPOS",err}},angular.extend(angular,{inherits:function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})},isNotEmptyString:function(value){return"string"==typeof value?value.length>0:!1},isNullOrUndefined:function(obj){return"undefined"==typeof obj||null===obj},randomStr:function(length){for(var chars="abcdefghklmnopqursuvwxzABCDEFHJKLMNOPQURSTUVWXYZ",str="",i=0;length>i;i++)str+=chars.substr(this.randomInt(0,chars.length-1),1);return str},randomInt:function(min,max){return Math.floor(Math.random()*max)+min},randomColor:function(){for(var res="#",i=0;6>i;i++)res+=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"][Math.floor(16*Math.random())];return res},localized:function(text,localeSet){if(window.locales=window.locales||{},localeSet=localeSet||"global","string"!=typeof text)return text;if(0==text.length)return text;var locale=window.locales[localeSet];if(locale){var out=locale[text];if(out)return out}return text},loc:function(text,localeSet){return this.localized(text,localeSet)},format:function(f){if("string"!=typeof f){for(var objects=[],k=0;i<arguments.length;k++)objects.push(inspect(arguments[k]));return objects.join(" ")}for(var i=1,args=arguments,len=args.length,str=String(f).replace(/%[sdj%]/g,function(x){if("%%"===x)return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":return JSON.stringify(args[i++]);default:return x}}),x=args[i];len>i;x=args[++i])str+=null===x||"object"!=typeof x?" "+x:" "+inspect(x);return str},toParam:function(object,prefix){var value,key,stack=[];if("string"==typeof object)return prefix=prefix||"data","data="+encodeURIComponent(object);if(angular.isArray(object)&&0==object.length)return encodeURIComponent(key)+"=";for(key in object)object.hasOwnProperty(key)&&(value=object[key],key=prefix?prefix+"["+key+"]":key,value="undefined"==typeof value||null==value?encodeURIComponent(key)+"=":value instanceof Date?encodeURIComponent(key)+"="+encodeURIComponent(ClientDataQueryable.escape(value)):"object"!=typeof value?encodeURIComponent(key)+"="+encodeURIComponent(value):angular.toParam(value,key),stack.push(value));return stack.join("&")},dasherize:function(s){return"string"!=typeof s?s:s.replace(/(^\s*|\s*$)/g,"").replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase()},idify:function(s){return"string"!=typeof s?s:s.replace(/(^\s*|\s*$)/g,"").replace(/(\.|\s)+(.)?/g,function(mathc,sep,c){return c?c.toUpperCase():""})},camelize:function(s){return"string"!=typeof s?s:s.replace(/(^\s*|\s*$)/g,"").replace(/(\-|_|\s)+(.)?/g,function(mathc,sep,c){return c?c.toUpperCase():""})},bracketize:function(s){return"string"!=typeof s?s:s.replace(/\.(\w+)/gi,"[$1]")},bootstrapDevice:function(){for(var sizes=["lg","md","sm","xs"],i=sizes.length-1;i>=0;i--){var $el=angular.element('<div id="sizeTest" class="hidden-'+sizes[i]+'">&nbsp;</div>');if($el.appendTo(angular.element("body")),$el.is(":hidden"))return $el.remove(),sizes[i];$el.remove()}},isInteger:function(value){return void 0===value||null===value?!1:value%1==0},isFloat:function(value){return void 0===value||null===value?!1:"number"==typeof value?!0:!isNaN(value-0);
}}),"function"!=typeof Array.isArray&&(Array.isArray=function(ar){return"object"==typeof ar&&"[object Array]"===Object.prototype.toString.call(ar)});var REG_DATETIME_ISO=/^(\d{4})(?:-?W(\d+)(?:-?(\d+)D?)?|(?:-(\d+))?-(\d+))(?:[T ](\d+):(\d+)(?::(\d+)(?:\.(\d+))?)?)?(?:Z(-?\d*))?([+-](\d+):(\d+))?$/;if(ClientDataService.prototype.execute=function(options){var self=this,$injector=angular.element(document.body).injector(),$http=$injector.get("$http"),$q=$injector.get("$q"),deferred=$q.defer();return setTimeout(function(){try{options.method=options.method||"GET",options.headers=options.headers||{},options.headers["Content-Type"]="application/json",Args.notNull(options.url,"Request URL"),Args.check(!/^https?:\/\//i.test(options.url),"Request URL may not be an absolute URI"),Args.check(/^GET|POST|PUT|DELETE$/i.test(options.method),"Invalid request method. Expected GET, POST, PUT or DELETE.");var url_=self.resolveUrl(options.url),o={method:options.method,url:url_,headers:options.headers,transformResponse:function(data,headers,status){if("undefined"!=typeof data&&null!=data){if(/^application\/json/.test(headers("Content-Type"))){if(0==data.length)return;return JSON.parse(data,dateParser)}return data}}};/^GET$/i.test(o.method)?o.params=options.data:o.data=options.data,$http(o).then(function(response){deferred.resolve(response.data)},function(err){deferred.reject(err)})}catch(e){deferred.reject(e)}},0),deferred.promise},ClientDataService.prototype.schema=function(name,callback){var $http=this.$http;this.$q;callback=callback||function(){},$http({method:"GET",cache:!0,url:this.resolveUrl(angular.format("/%s/schema.json",name))}).then(function(response){callback(null,response.data)},function(err){callback(err)})},ClientDataService.prototype.items=function(options,callback){var $http=this.$http,url=(this.$q,UrlPropertyDescriptor(options).get()||"/%s/index.json".replace(/%s/gi,ModelPropertyDescriptor(options).get()));delete options.$url,callback=callback||function(){},$http({method:"GET",url:this.resolveUrl(url),params:options}).then(function(response){callback(null,response.data)},function(err){console.log(err),callback(new Error("Internal Server Error"))})},ClientDataService.prototype.get=function(options){var $http=this.$http,url=UrlPropertyDescriptor(options).get()||"/%s/index.json".replace(/%s/gi,ModelPropertyDescriptor(options).get());return delete options.$url,$http({method:"GET",url:this.resolveUrl(url),params:options}).then(function(response){return response.data},function(err){return console.log(err),new Error("Internal Server Error")})},ClientDataService.prototype.save=function(obj,options,callback){var $http=this.$http,url=UrlPropertyDescriptor(options).get()||"/%s/index.json".replace(/%s/gi,ModelPropertyDescriptor(options).get());$http.put(this.resolveUrl(url),obj).success(function(data){callback(null,data)}).error(function(err,status,headers){var er;er=headers("X-Status-Description")?new Error(headers("X-Status-Description")):new Error(err),er.status=status,callback(er)})},ClientDataService.prototype["new"]=function(obj,options,callback){return angular.isArray(obj)?obj.forEach(function(x){angular.isObject(x)&&(x.$state=1)}):angular.isObject(obj)&&(obj.$state=1),this.save(obj,options,function(err,result){return err?callback(err):(angular.isArray(obj)?obj.forEach(function(x){angular.isObject(x)&&delete x.$state}):angular.isObject(obj)&&delete obj.$state,callback(null,result))})},ClientDataService.prototype.remove=function(item,options,callback){var $http=this.$http,url=UrlPropertyDescriptor(options).get()||"/%s/index.json".replace(/%s/gi,ModelPropertyDescriptor(options).get());$http({method:"DELETE",url:this.resolveUrl(url),data:angular.toParam(item,"data"),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(data){callback(null,data)}).error(function(err,status,headers){callback(headers("X-Status-Description")?new Error(headers("X-Status-Description")):new Error(err))})},ClientDataModel.prototype.url=function(value){return this.setUrl(value)},ClientDataModel.prototype.schema=function(){var self=this,$injector=angular.element(document.body).injector(),$q=$injector.get("$q"),deferred=$q.defer();return setTimeout(function(){self.getService().schema(this.getName(),function(err,result){return err?deferred.reject(err):deferred.resolve(result)})},0),deferred.promise},ClientDataModel.prototype.asQueryable=function(){return new ClientDataQueryable(this.getName(),this.getService())},ClientDataModel.prototype.save=function(obj){var self=this,$injector=angular.element(document.body).injector(),$q=$injector.get("$q"),deferred=$q.defer();return setTimeout(function(){self.getService().save(obj,{url:self.getUrl()},function(err,result){return err?deferred.reject(err):deferred.resolve(result)})},0),deferred.promise},ClientDataModel.prototype.remove=function(obj){var self=this,$injector=angular.element(document.body).injector(),$q=$injector.get("$q"),deferred=$q.defer();return setTimeout(function(){self.getService().remove(obj,{url:self.getUrl()},function(err,result){return err?deferred.reject(err):deferred.resolve(result)})},0),deferred.promise},ClientDataModel.prototype.where=function(attr){return this.asQueryable().where(attr)},ClientDataModel.prototype.getItems=function(){return this.asQueryable().getItems()},ClientDataModel.prototype.getItem=function(){return this.asQueryable().getItem()},ClientDataModel.prototype.select=function(attr){return ClientDataQueryable.prototype.select.apply(this.asQueryable(),arguments)},ClientDataModel.prototype.skip=function(val){return this.asQueryable().skip(val)},ClientDataModel.prototype.take=function(val){return this.asQueryable().take(val)},ClientDataModel.prototype.orderBy=function(attr){return ClientDataQueryable.prototype.orderBy.call(this.asQueryable(),attr)},ClientDataModel.prototype.orderByDescending=function(attr){return ClientDataQueryable.prototype.orderByDescending.call(this.asQueryable(),attr)},ClientDataContext.prototype.authenticate=function(username,password){return this.getService().execute({method:"GET",url:"/User/index.json",data:{$filter:"id eq me()"},headers:{Authorization:"Basic "+TextUtils.toBase64(username+":"+password)}})},MostDataField.prototype.as=function(s){return"undefined"==typeof s||null==s?(delete this.$as,this):(this.$as=s,this)},MostDataField.prototype._as=function(){return angular.isNotEmptyString(this.$as)?" as "+this.$as:""},MostDataField.prototype.toString=function(){return this.name+this._as()},MostDataField.prototype.max=function(){return String.prototype.format("max(%s)",this.name)+this._as()},MostDataField.prototype.min=function(){return String.prototype.format("min(%s)",this.name)+this._as()},MostDataField.prototype.count=function(){return String.prototype.format("count(%s)",this.name)+this._as()},MostDataField.prototype.average=function(){return String.prototype.format("avg(%s)",this.name)+this._as()},MostDataField.prototype.length=function(){return String.prototype.format("length(%s)",this.name)+this._as()},MostDataField.prototype.indexOf=function(s){return String.prototype.format("indexof(%s,%s)",this.name,ClientDataQueryable.escape(s))+this._as()},MostDataField.prototype.substr=function(pos,length){return String.prototype.format("substring(%s,%s,%s)",this.name,pos,length)+this._as()},MostDataField.prototype.floor=function(){return String.prototype.format("floor(%s)",this.name)+this._as()},MostDataField.prototype.round=function(){return String.prototype.format("round(%s)",this.name)+this._as()},MostDataField.prototype.getYear=function(){return String.prototype.format("year(%s)",this.name)+this._as()},MostDataField.prototype.getDay=function(){return String.prototype.format("day(%s)",this.name)+this._as()},MostDataField.prototype.getMonth=function(){return String.prototype.format("month(%s)",this.name)+this._as()},MostDataField.prototype.getMinutes=function(){return String.prototype.format("minute(%s)",this.name)+this._as()},MostDataField.prototype.getHours=function(){return String.prototype.format("hour(%s)",this.name)+this._as()},MostDataField.prototype.getSeconds=function(){return String.prototype.format("second(%s)",this.name)+this._as()},MostDataField.prototype.getDate=function(){return String.prototype.format("date(%s)",this.name)+this._as()},MostDataField.prototype.toLocaleLowerCase=function(){return String.prototype.format("tolower(%s)",this.name)+this._as()},MostDataField.prototype.toLowerCase=function(){return String.prototype.format("tolower(%s)",this.name)+this._as()},MostDataField.prototype.toLocaleUpperCase=function(){return String.prototype.format("toupper(%s)",this.name)+this._as()},MostDataField.prototype.toUpperCase=function(){return String.prototype.format("toupper(%s)",this.name)+this._as()},MostDataField.prototype.trim=function(){return String.prototype.format("trim(%s)",this.name)+this._as()},MostDataField.prototype.concat=function(s0){for(var res="concat("+this.name,i=0;i<arguments.length;i++)res+=","+ClientDataQueryable.escape(s);return res+=")"},MostDataField.prototype.endsWith=function(s){return String.prototype.format("endswith(%s,%s)",this.name,ClientDataQueryable.escape(s))+this._as()},MostDataField.prototype.startsWith=function(s){return String.prototype.format("startswith(%s,%s)",this.name,ClientDataQueryable.escape(s))+this._as()},"undefined"==typeof String.prototype.fieldOf){var fieldOf=function(){if(null==this)throw new TypeError("String.prototype.fieldOf called on null or undefined");return new MostDataField(this)};String.prototype.fieldOf||(String.prototype.fieldOf=fieldOf)}if("undefined"==typeof String.prototype.format){var format=function(f){var i;if("string"!=typeof f){var objects=[];for(i=0;i<arguments.length;i++)objects.push(inspect(arguments[i]));return objects.join(" ")}i=1;for(var args=arguments,len=args.length,str=String(f).replace(/%[sdj%]/g,function(x){if("%%"===x)return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":return JSON.stringify(args[i++]);default:return x}}),x=args[i];len>i;x=args[++i])str+=null===x||"object"!=typeof x?" "+x:" "+inspect(x);return str};String.prototype.format||(String.prototype.format=format)}FieldSelector.select=function(name){return new FieldSelector(name)},FieldSelector.count=function(name){return new FieldSelector(String.format("count(%s)",name))},FieldSelector.sum=function(name){return new FieldSelector(String.format("sum(%s)",name))},FieldSelector.max=function(name){return new FieldSelector(String.format("max(%s)",name))},FieldSelector.min=function(name){return new FieldSelector(String.format("min(%s)",name))},FieldSelector.average=function(name){return new FieldSelector(String.format("avg(%s)",name))},FieldSelector.date=function(name){return new FieldSelector(String.format("date(%s)",name))},FieldSelector.prototype.getFullYear=function(){return this.name=String.format("year(%s)",this.name),this},FieldSelector.prototype.getDay=function(){return this.name=String.format("day(%s)",this.name),this},FieldSelector.prototype.getMonth=function(){return this.name=String.format("month(%s)",this.name),this},FieldSelector.prototype.getHours=function(){return this.name=String.format("hour(%s)",this.name),this},FieldSelector.prototype.getMinutes=function(){return this.name=String.format("minute(%s)",this.name),this},FieldSelector.prototype.getSeconds=function(){return this.name=String.format("second(%s)",this.name),this},FieldSelector.prototype.length=function(){return this.name=String.format("length(%s)",this.name),this},FieldSelector.prototype.floor=function(){return this.name=String.format("floor(%s)",this.name),this},FieldSelector.prototype.round=function(){return this.name=String.format("round(%s)",this.name),this},FieldSelector.prototype.toLocaleLowerCase=function(){return this.name=String.format("tolower(%s)",this.name),this},FieldSelector.prototype.toLocaleUpperCase=function(){return this.name=String.format("toupper(%s)",this.name),this},FieldSelector.prototype.as=function(alias){this.as=alias},FieldSelector.prototype.toString=function(){return this.as?this.name+" as "+this.as:this.name},FieldExpression.prototype.toString=function(){return this.expr},FieldExpression.create=function(expr){return new FieldExpression(expr)},ClientDataQueryable.prototype.url=function(s){if("undefined"==typeof s)return this.$url;if("string"!=typeof s)throw new Error("Invalid argument type. Expected string.");return this.$url=s,delete this.$model,this},ClientDataQueryable.prototype.data=function(){var self=this,deferred=self.service.$q.defer(),options=self.getParams();return delete options.privates_,self.service.items(options,function(err,result){err?(console.log(err),deferred.reject(err)):deferred.resolve(result)}),deferred.promise},ClientDataQueryable.prototype.getItems=function(){var self=this,deferred=self.service.$q.defer();return setTimeout(function(){var copy=self.getParams();self.service.execute({method:"GET",url:self.getUrl(),data:copy}).then(function(result){deferred.resolve(result)})["catch"](function(err){console.log(err),deferred.reject(err)})},0),deferred.promise},ClientDataQueryable.prototype.getItem=function(){var self=this,deferred=self.service.$q.defer();return setTimeout(function(){var copy=self.first().getParams();self.service.execute({method:"GET",url:self.getUrl(),data:copy}).then(function(result){deferred.resolve(result[0])})["catch"](function(err){console.log(err),deferred.reject(err)})},0),deferred.promise},ClientDataQueryable.prototype.reset=function(){return this.items=void 0,this.item=void 0,this},ClientDataQueryable.prototype.copy=function(){var self=this,result=new ClientDataQueryable,keys=Object.keys(this);return keys.forEach(function(key){0==key.indexOf("$")&&(result[key]=self[key])}),result.$prepared&&(result.$filter?result.$filter=angular.format("(%s) and (%s)",result.$prepared,result.$filter):result.$filter=result.$prepared,delete result.$prepared),result},ClientDataQueryable.prototype.getParams=function(){var self=this,result={},keys=Object.keys(this);return keys.forEach(function(key){0==key.indexOf("$")&&"undefined"!=typeof self[key]&&null!=self[key]&&(result[key]=self[key])}),result.$prepared&&(result.$filter?result.$filter=angular.format("(%s) and (%s)",result.$prepared,result.$filter):result.$filter=result.$prepared,delete result.$prepared),result},ClientDataQueryable.escape=function(val){if(void 0===val||null===val)return"null";switch(typeof val){case"boolean":return val?"true":"false";case"number":return val+""}if(val instanceof Date){var dt=new Date(val),year=dt.getFullYear(),month=ClientDataQueryable.zeroPad(dt.getMonth()+1,2),day=ClientDataQueryable.zeroPad(dt.getDate(),2),hour=ClientDataQueryable.zeroPad(dt.getHours(),2),minute=ClientDataQueryable.zeroPad(dt.getMinutes(),2),second=ClientDataQueryable.zeroPad(dt.getSeconds(),2),millisecond=ClientDataQueryable.zeroPad(dt.getMilliseconds(),3),offset=(new Date).getTimezoneOffset(),timezone=(offset>=0?"+":"")+ClientDataQueryable.zeroPad(Math.floor(offset/60),2)+":"+ClientDataQueryable.zeroPad(offset%60,2);return val="'"+year+"-"+month+"-"+day+" "+hour+":"+minute+":"+second+"."+millisecond+timezone+"'"}if("object"==typeof val&&"[object Array]"===Object.prototype.toString.call(val)){var values=[];return val.forEach(function(x){ClientDataQueryable.escape(x)}),values.join(",")}return"object"==typeof val?val.hasOwnProperty("$name")?val.$name:this.escape(val.valueOf()):(val=val.replace(/[\0\n\r\b\t\\\'\"\x1a]/g,function(s){switch(s){case"\x00":return"\\0";case"\n":return"\\n";case"\r":return"\\r";case"\b":return"\\b";case"	":return"\\t";case"":return"\\Z";default:return"\\"+s}}),"'"+val+"'")},ClientDataQueryable.zeroPad=function(number,length){number=number||0;for(var res=number.toString();res.length<length;)res="0"+res;return res},ClientDataQueryable.prototype.append=function(){var exprs,self=this;if(self.privates_.left){var expr=null;"in"==self.privates_.op?Array.isArray(self.privates_.right)&&(exprs=[],self.privates_.right.forEach(function(x){exprs.push(self.privates_.left+" eq "+ClientDataQueryable.escape(x))}),exprs.length>0&&(expr="("+exprs.join(" or ")+")")):"nin"==self.privates_.op?Array.isArray(self.privates_.right)&&(exprs=[],self.privates_.right.forEach(function(x){exprs.push(self.privates_.left+" ne "+ClientDataQueryable.escape(x))}),exprs.length>0&&(expr="("+exprs.join(" and ")+")")):expr=self.privates_.left+" "+self.privates_.op+" "+ClientDataQueryable.escape(self.privates_.right),expr&&("undefined"==typeof self.$filter||null==self.$filter?self.$filter=expr:(self.privates_.lop=self.privates_.lop||"and",self.privates_._lop=self.privates_._lop||self.privates_.lop,self.privates_._lop==self.privates_.lop?self.$filter=self.$filter+" "+self.privates_.lop+" "+expr:self.$filter="("+self.$filter+") "+self.privates_.lop+" "+expr,self.privates_._lop=self.privates_.lop))}return delete self.privates_.lop,delete self.privates_.left,delete self.privates_.op,delete self.privates_.right,this},ClientDataQueryable.prototype.model=function(name){if("undefined"==typeof name)return this.$model;if("string"!=typeof name)throw new Error("Invalid argument type. Expected string.");return this.$model=name,delete this.$url,this},ClientDataQueryable.prototype.inlineCount=function(value){return"undefined"==typeof value?this.$inlinecount=!0:this.$inlinecount=value,this},ClientDataQueryable.prototype.paged=function(value){return this.inlineCount(value)},ClientDataQueryable.prototype.asArray=function(value){return this.$array=value,this},ClientDataQueryable.prototype.select=function(attr){var arr=[];if(delete this.$select,"undefined"==typeof attr||null==attr)return this;if(attr instanceof Array)return ClientDataQueryable.prototype.select.apply(this,attr);for(var arg=Array.prototype.slice.call(arguments),i=0;i<arg.length;i++)if("string"==typeof arg[i])arr.push(arg[i]);else{if(!(arg[i]instanceof FieldSelector))throw new Error("Invalid argument. Expected string.");arr.push(arg[i].toString())}return arr.length>0&&(this.$select=arr.join(",")),this},ClientDataQueryable.prototype.groupBy=function(attr){var arr=[];if(delete this.$groupby,"undefined"==typeof attr||null==attr)return this;if(attr instanceof Array)return ClientDataQueryable.prototype.groupBy.apply(this,attr);for(var arg=Array.prototype.slice.call(arguments),i=0;i<arg.length;i++)if("string"==typeof arg[i])arr.push(arg[i]);else{if(!(arg[i]instanceof FieldSelector))throw new Error("Invalid argument. Expected string.");arr.push(arg[i].toString())}return arr.length>0&&(this.$groupby=arr.join(",")),this},ClientDataQueryable.prototype.group=function(attr){return this.groupBy.apply(this,arguments)},ClientDataQueryable.prototype.expand=function(attr){var arr=[];if(delete this.$expand,"undefined"==typeof attr||null==attr)return this;if(attr instanceof Array)return ClientDataQueryable.prototype.expand.apply(this,attr);for(var arg=Array.prototype.slice.call(arguments),i=0;i<arg.length;i++){if("string"!=typeof arg[i])throw new Error("Invalid argument. Expected string.");arr.push(arg[i])}return arr.length>0&&(this.$expand=arr.join(",")),this},ClientDataQueryable.prototype.filter=function(s){var self=this;delete this.$filter;var p=self.privates_;return delete p.left,delete p.right,delete p.op,delete p.lop,delete p._lop,"string"!=typeof s?this:0==s.length?this:(this.$filter=s,this)},ClientDataQueryable.prototype.prepare=function(){return this.$filter&&("undefined"==typeof this.$prepared||null===this.$prepared?this.$prepared=this.$filter:this.$prepared=angular.format("(%s) and (%s)",this.$prepared,this.$filter),delete this.$filter),this},ClientDataQueryable.prototype.toFilter=function(){return"undefined"!=typeof this.$filter&&null!=this.$filter?"undefined"==typeof this.$prepared||null===this.$prepared?this.$filter:angular.format("(%s) and (%s)",this.$prepared,this.$filter):"undefined"!=typeof this.$prepared&&null!=this.$prepared?this.$prepared:void 0},ClientDataQueryable.prototype.andAlso=function(attr){var self=this;return Args.notEmpty(name,"The left operand of a logical expression"),self.$filter&&(self.$filter="("+self.$filter+")"),self.privates_.left=attr,self.privates_.lop="and",self},ClientDataQueryable.prototype.orElse=function(attr){var self=this;return Args.notEmpty(name,"The left operand of a logical expression"),self.$filter&&(self.$filter="("+self.$filter+")"),self.privates_.left=attr,self.privates_.lop="or",self},ClientDataQueryable.prototype.take=function(val){return this.$top=val,this},ClientDataQueryable.prototype.all=function(){return this.$top=-1,this},ClientDataQueryable.prototype.first=function(){return this.$top=1,this.$skip=0,this},ClientDataQueryable.prototype.list=function(){return this.$inlinecount=!0,this},ClientDataQueryable.prototype.skip=function(val){return this.$skip=val,this},ClientDataQueryable.prototype.orderBy=function(name){return"undefined"==typeof name&&null==name||(this.$orderby=name.toString()),this},ClientDataQueryable.prototype.orderByDescending=function(name){return"undefined"==typeof name&&null==name||(this.$orderby=name.toString()+" desc"),this},ClientDataQueryable.prototype.thenBy=function(name){return"undefined"==typeof name&&null==name||(this.$orderby+=this.$orderby?","+name.toString():name.toString()),this},ClientDataQueryable.prototype.thenByDescending=function(name){return"undefined"==typeof name&&null==name||(this.$orderby+=(this.$orderby?","+name.toString():name.toString())+" desc"),this},ClientDataQueryable.prototype.where=function(name){return delete this.$filter,this.privates_.left=name,this},ClientDataQueryable.prototype.and=function(name){return this.privates_.lop="and","undefined"!=typeof name&&(this.privates_.left=name),this},ClientDataQueryable.prototype.or=function(name){return this.privates_.lop="or","undefined"!=typeof name&&(this.privates_.left=name),this},ClientDataQueryable.prototype.equal=function(value){return this.privates_.op=(Array.isArray(value),"eq"),this.privates_.right=value,this.append()},ClientDataQueryable.prototype.field=function(name){return{$name:name}},ClientDataQueryable.prototype.notEqual=function(value){return this.privates_.op=Array.isArray(value)?"nin":"ne",this.privates_.right=value,this.append()},ClientDataQueryable.prototype.greaterThan=function(value){return this.privates_.op="gt",this.privates_.right=value,this.append()},ClientDataQueryable.prototype.greaterOrEqual=function(value){return this.privates_.op="ge",this.privates_.right=value,this.append()},ClientDataQueryable.prototype.lowerThan=function(value){return this.privates_.op="lt",this.privates_.right=value,this.append()},ClientDataQueryable.prototype.lowerOrEqual=function(value){return this.privates_.op="le",this.privates_.right=value,this.append()},ClientDataQueryable.prototype.contains=function(value){return this.privates_.op="ge",this.privates_.left=angular.format("indexof(%s,%s)",this.privates_.left,ClientDataQueryable.escape(value)),this.privates_.right=0,this.append()},ClientDataQueryable.prototype.getDate=function(){return this.privates_.left=String.prototype.format("date(%s)",this.privates_.left),this},ClientDataQueryable.prototype.getDay=function(){return this.privates_.left=String.prototype.format("day(%s)",this.privates_.left),this},ClientDataQueryable.prototype.getMonth=function(){return this.privates_.left=String.prototype.format("month(%s)",this.privates_.left),this},ClientDataQueryable.prototype.getYear=function(){return this.privates_.left=String.prototype.format("year(%s)",this.privates_.left),this},ClientDataQueryable.prototype.getHours=function(){return this.privates_.left=String.prototype.format("hour(%s)",this.privates_.left),this},ClientDataQueryable.prototype.getMinutes=function(){return this.privates_.left=String.prototype.format("minute(%s)",this.privates_.left),this},ClientDataQueryable.prototype.getSeconds=function(){return this.privates_.left=String.prototype.format("second(%s)",this.privates_.left),this},ClientDataQueryable.prototype.indexOf=function(s){return this.privates_.left=String.prototype.format("indexof(%s,%s)",this.privates_.left,ClientDataQueryable.escape(s)),this},ClientDataQueryable.prototype.substr=function(pos,length){return this.privates_.left=String.prototype.format("substring(%s,%s,%s)",this.privates_.left,pos,length),this},ClientDataQueryable.prototype.floor=function(){return this.privates_.left=String.prototype.format("floor(%s)",this.privates_.left),this},ClientDataQueryable.prototype.round=function(){return this.privates_.left=String.prototype.format("round(%s)",this.privates_.left),this},ClientDataQueryable.prototype.length=function(){return this.privates_.left=String.prototype.format("length(%s)",this.privates_.left),this},ClientDataQueryable.prototype.toLocaleLowerCase=function(){return this.privates_.left=String.prototype.format("tolower(%s)",this.privates_.left),this},ClientDataQueryable.prototype.toLowerCase=function(){return this.privates_.left=String.prototype.format("tolower(%s)",this.privates_.left),this},ClientDataQueryable.prototype.toUpperCase=function(){return this.privates_.left=String.prototype.format("toupper(%s)",this.privates_.left),this},ClientDataQueryable.prototype.toLocaleUpperCase=function(){return this.privates_.left=String.prototype.format("toupper(%s)",this.privates_.left),this},ClientDataQueryable.prototype.startsWith=function(s){return this.privates_.left=String.prototype.format("startswith(%s,%s)",this.privates_.left,ClientDataQueryable.escape(s)),this},ClientDataQueryable.prototype.endsWith=function(s){return this.privates_.left=String.prototype.format("endswith(%s,%s)",this.privates_.left,ClientDataQueryable.escape(s)),this},ClientDataQueryable.prototype.trim=function(){return this.privates_.left=String.prototype.format("trim(%s)",this.privates_.left),this},ClientDataQueryable.prototype.concat=function(s0){for(var res="concat("+this.privates_.left,i=0;i<arguments.length;i++)res+=","+ClientDataQueryable.escape(s0);return res+=")",this.privates_.left=res,this},MostSharedService.prototype.broadcast=function(name,args){var self=this;self.$root.$broadcast(name,args)},MostFloatDirective.FLOAT_REGEXP=/^\-?\d+((\.|\,)\d+)?$/;var most=angular.module("most",[]);most.factory("$shared",function($rootScope,$location,$injector){return new MostSharedService($rootScope,$location,$injector)}),most.provider("$svc",function(){this.defaults={base:"/"},this.$get=function($http,$q){var res=new ClientDataService($http,$q);return res.base=this.defaults.base||"/",res}}),most.provider("$context",function(){this.defaults={base:"/"},this.$get=function($http,$q){var service=new ClientDataService($http,$q);return service.base=this.defaults.base||"/",new ClientDataContext(service)}}),most.controller("DataController",DataController).controller("ItemController",ItemController).controller("CommonController",CommonController),most.directive("loc",MostLocalizedDirective).directive("locHtml",MostLocalizedHtmlDirective).directive("mostItem",MostItemDirective).directive("mostEvent",MostEventDirective).directive("mostWatch",MostWatchDirective).directive("mostString",MostStringDirective).directive("mostTypeahead",MostTypeaheadDirective).directive("mostData",MostDataInstanceDirective).directive("mostVariable",MostVariableDirective).directive("mostParam",MostParamDirective).directive("mostFloat",MostFloatDirective).directive("mostRequired",MostRequiredDirective).directive("includeReplace",IncludeReplaceDirective).directive("mostConfirm",MostConfirmDirective).directive("ctrlInit",ControllerInitDirective).directive("mostEmail",MostEmailDirective),most.filter("loc",MostLocalizedFilter),window&&(window.ClientDataQueryable=ClientDataQueryable,window.ClientDataService=ClientDataService,window.ClientDataModel=ClientDataModel,window.MostDataField=MostDataField,window.CommonController=CommonController,window.DataController=DataController,window.ItemController=ItemController,window.QueryableController=QueryableController)}(window,angular,jQuery);